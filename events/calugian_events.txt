#cricket events, basically modified versions of the mesoamerican ball game events in AtEFF##

namespace = calugian_event

narrative_event = {
	id = calugian_event.1
	title = TITLE_antanian_restoration
	desc = {
		text = EVTDESC_antanian_restoration
		trigger = {
			is_alternate_start = no
		}
	}
	picture = GFX_event_antanian_restoration
	trigger = {
	    culture = calugian
		has_landed_title = k_peninsula
		NOT = { has_global_flag = antania_restored }
	}
	mean_time_to_happen = {
		days = 1
	}
	option = {
		name = OPT_A_antanian_restoration
		prestige = 400
		set_global_flag = antania_restored
    }
}

character_event = {
	id = calugian_event.2
	is_triggered_only = yes
	picture = GFX_evt_battle_scene
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_calugian_victory_ritual
		trigger = {
			is_alternate_start = no
		}
	}
	option = { #Agree to perform the ritual
		name = OPT_A_calugian_victory_ritual
		wealth = 100
		narrative_event = { id = calugian_event.20 days = 2 }
	}
	option = { #Refuse to perform the ritual
		name = OPT_B_calugian_victory_ritual
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_4 }
			}
			piety = -500
		}
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_3 }
			}
			piety = -400
		}
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_2 }
			}
			piety = -300
		}
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_1 }
			}
			piety = -200
		}
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_0 }
			}
			piety = -100
		}
		random_list = {
			20 = { add_trait = cynical }
			20 = { give_nickname = nick_the_impious }
			80 = {}
		}
	}
	option = { #Take credit for the victory yourself
		name = OPT_C_calugian_victory_ritual
		tooltip_info = proud
	    trigger = {
		    trait = proud
			NOT = { trait = zealous }
	    }
		prestige = 300
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_4 }
			}
			piety = -600
		}
				if = {
			limit = {
				primary_title = {  has_law = priestly_influence_3 }
			}
			piety = -500
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_2 }
			}
			piety = -400
		}
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_1 }
			}
			piety = -300
		}
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_0 }
			}
			piety = -200
		}
		random_list = {
			20 = { add_trait = cynical }
			20 = { give_nickname = nick_the_impious }
			20 = { give_nickname = nick_the_proud }
			60 = {}
		}
	}
}
narrative_event = {
	id = calugian_event.20
	title = TITLE_calugian_victory_ritual_end
	is_triggered_only = yes
	picture = GFX_evt_aztec_sacrifice
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC_calugian_victory_ritual_end
	}
	
	option = { #Ritual ends
		name = OPT_A_calugian_victory_ritual_end
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_4 }
			}
			piety = 300
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_3 }
			}
			piety = 250
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_2 }
			}
			piety = 200
		}
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_1 }
			}
			piety = 150
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_0 }
			}
			piety = 100
		}
		prestige = -200
	}
}
narrative_event = {
	id = calugian_event.3
	title = TITLE_calugian_kinslayer_ritual
	is_triggered_only = yes
	picture = GFX_evt_aztec_sacrifice
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC_calugian_kinslayer_ritual
	}
	
	option = {
		name = OPT_A_calugian_kinslayer_ritual
		trigger = {
			trait = kinslayer
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_1 }
			}
			add_trait = familial_kinslayer
			piety = 50
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_2 }
			}
			add_trait = dynastic_kinslayer
			piety = 50
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_3 }
			}
			add_trait = dynastic_kinslayer
			piety = 100
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_4 }
			}
			remove_trait = kinslayer
			piety = 100
		}
	}
	option = {
		name = OPT_B_calugian_kinslayer_ritual
		trigger = {
		    trait = familial_kinslayer
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_1 }
			}
			add_trait = dynastic_kinslayer
			piety = 50
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_2 }
			}
			add_trait = dynastic_kinslayer
			piety = 50
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_3 }
			}
			remove_trait = familial_kinslayer
			piety = 50
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_4 }
			}
			remove_trait = familial_kinslayer
			piety = 100
		}
	}
	option = {
		name = OPT_C_calugian_kinslayer_ritual
		trigger = {
		    trait = dynastic_kinslayer
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_1 }
			}
			remove_trait = dynastic_kinslayer
			piety = 50
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_2 }
			}
			remove_trait = dynastic_kinslayer
			piety = 50
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_3 }
			}
			remove_trait = dynastic_kinslayer
			piety = 100
		}
		if = {
			limit = {
				primary_title = {  has_law = priestly_influence_4 }
			}
			remove_trait = dynastic_kinslayer
			piety = 100
		}
	}
}
character_event = {
	id = calugian_event.4
	is_triggered_only = yes
	picture = GFX_evt_battle_scene
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_borrowing_calugian
		trigger = {
			is_alternate_start = no
		}
	}
	option = { #Agree to borrow
		name = OPT_A_borrowing_calugian
		clr_character_flag = borrowing_calugian
		add_character_modifier = {
			name = borrowed_calugian
			duration = -1
			inherit = yes
		}
		wealth = 600
		if = {
			limit = {
				primary_title = { has_law = priestly_influence_0 }
			}
			primary_title = {
			    revoke_law = priestly_influence_0
			    add_law_w_cooldown = priestly_influence_1
		    }
		}
		else_if = {
			limit = {
				primary_title = { has_law = priestly_influence_1 }
			}
			primary_title = {
			    revoke_law = priestly_influence_1
			    add_law_w_cooldown = priestly_influence_2
		    }
		}
		else_if = {
			limit = {
				primary_title = { has_law = priestly_influence_2 }
			}
			primary_title = {
			    revoke_law = priestly_influence_2
			    add_law_w_cooldown = priestly_influence_3
		    }
		}
		else_if = {
			limit = {
				primary_title = { has_law = priestly_influence_3 }
			}
			primary_title = {
			    revoke_law = priestly_influence_3
			    add_law_w_cooldown = priestly_influence_4
		    }
		}
		else = {
			prestige = -100
		}
	}
	option = { #Refuse to borrow
		name = OPT_B_borrowing_calugian
		clr_character_flag = borrowing_calugian
	}
}
### Hedgehog Marshal
character_event = {
	id = calugian_event.5
	border = GFX_event_normal_frame_religion
	picture = GFX_evt_courier

	desc = {
		trigger = {
			culture = calugian
		}

		text = EVTDESC_sir_thunderhammer
		picture = GFX_evt_courier
	}
	
	min_age = 16
	prisoner = no
	only_capable = yes
	only_playable = yes
	
	trigger = {
		has_dlc = "Zeus"
		NOT = {
			has_game_rule = {
				name = silly_events
				value = off
			}
		}
		trait = lunatic
		culture = calugian
		any_voter = {
			has_job_title = job_marshal
			NOT = { race = hedgehog }
			OR = {
				ai = no
				liege = { ai = no }
				has_game_rule = {
					name = silly_events
					value = unrestricted
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 420
	}
	
	option = {
		name = OPT_A_sir_thunderhammer
		tooltip_info = lunatic
		job_marshal = {
			opinion = {
				modifier = opinion_fired_from_council
				who = ROOT
				years = 5
			}
			hidden_tooltip = {
				character_event = { id = 6318 }
			}
			remove_title = job_marshal
		}
		any_courtier = {
			limit = {
				race = hedgehog
			}
			give_job_title = job_marshal
			break = yes
		}

		tooltip = {
			create_character = {
				name = "Sir Thunderhammer"
				age = 16
				religion = ROOT
				culture = hedgehog_culture
				race = hedgehog
				dynasty = NONE
				trait = slow
				trait = strong
				trait = brave
				trait = frail
				trait = holy_warrior
				trait = brilliant_strategist
				trait = strategist
				martial = 20
			}
		}

		hidden_tooltip = {
			random_list = {
				50 = {
					create_character = {
						name = "Sir Thunderhammer"
						age = 16
						religion = ROOT
						culture = hedgehog_culture
						race = hedgehog
						dynasty = NONE
				        trait = slow
				        trait = strong
						trait = brave
				        trait = frail
				        trait = holy_warrior
						trait = brilliant_strategist
						trait = strategist
				        martial = 20
					}
				}
				50 = {
					create_character = {
						name = "Sir Thunderhammer"
						age = 16
						religion = ROOT
						culture = hedgehog_culture
						race = hedgehog
						dynasty = NONE
				        trait = slow
				        trait = strong
						trait = brave
				        trait = frail
				        trait = inspiring_leader
						trait = brilliant_strategist
						trait = strategist
				        martial = 20
					}
				}
			}
		}
		new_character = {
			give_job_title = job_marshal
			opinion = {
				modifier = opinion_my_master
				who = ROOT
				years = 100
			}
			reverse_opinion = {
				modifier = opinion_my_horse
				who = ROOT
				years = 100
			}
		}
	}
}